@using FleetManagement.Domain.Enums
@model IEnumerable<FleetManagement.Application.Aircrafts.DTOs.AircraftDto>

@{
    Layout = "_AircraftsLayout";
    ViewData["Title"] = "Aircraft Fleet";
}

<div class="aircraft-container">

    <!-- Aircraft Stats -->
    <div id="aircraftStats" class="aircraft-stats">
        <partial name="_AircraftStatsPartial" model="Model" />
    </div>

    <!-- Header and Add Button -->
    <div class="aircraft-header">
        <h1>
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
            </svg>
            Aircrafts
        </h1>



        <button onclick="openCreateModal()" class="btn btn-primary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
            Add New Aircraft
        </button>
    </div>

    


    <!-- Aircraft List Container -->
    <div class="aircraft-list-box">
        <div class="aircraft-search">
            <input type="text" id="aircraftSearchInput" placeholder="Search Aircrafts (min 2 characters)" />
        </div>
        <div id="aircraftList" >
            
            @if (Model != null && Model.Any())
            {
                <div class="aircraft-grid">
                    @foreach (var aircraft in Model)
                    {
                        <partial name="_AircraftCard" model="aircraft" />
                    }
                </div>
            }
            else
            {
                <partial name="_EmptyAircraftListPartial" />
            }
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay-del" id="deleteModalOverlay">
        <div class="modal-content-del">
            <h3>Confirm Delete</h3>
            <p>Are you sure you want to delete aircraft <strong id="deleteAircraftReg"></strong>?</p>
            <div class="modal-actions" style="display:flex; justify-content: space-around; margin-top:1rem;">
                <button id="confirmDeleteBtn" class="btn btn-danger">Delete</button>
                <button id="cancelDeleteBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Modal Container -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModalOnOverlay(event)">
        <div id="modalContent"></div>
    </div>



    <!-- Loading Spinner Overlay -->
    <div id="loadingSpinnerOverlay" class="loading-spinner-overlay" style="display:none;">
        <div class="loading-spinner"></div>
    </div>

</div>

<script src="~/js/Aircrafts/aircraft-management.js" asp-append-version="true"></script>